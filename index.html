<!doctype html>
<html lang="zh-Hant">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="page_title">Web Benchmarks Index</title>
  <meta name="description" data-i18n="meta_desc"
    content="ä¸€é æ”¶é½Š WebGL/WebGPU/JS/WASM/AI benchmark èˆ‡å·¥å…·é€£çµï¼Œæ”¯æ´ ?go=slug ç›´æ¥è·³è½‰ã€‚" />
  <style>
    :root {
      --bg: #0b0d10;
      --panel: #12151a;
      --panel2: #0f1216;
      --text: #e6e8ee;
      --muted: #a9b0bd;
      --border: rgba(255, 255, 255, .10);
      --accent: #7aa2ff;
      --ok: #4ade80;
      --warn: #fbbf24;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;
      background: radial-gradient(1200px 800px at 20% 0%, rgba(122, 162, 255, .18), transparent 60%),
        radial-gradient(900px 700px at 95% 20%, rgba(74, 222, 128, .12), transparent 55%),
        var(--bg);
      color: var(--text);
      line-height: 1.5;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
      background: rgba(11, 13, 16, .78);
      border-bottom: 1px solid var(--border);
    }

    .wrap {
      max-width: 1080px;
      margin: 0 auto;
      padding: 18px 16px;
    }

    .title {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
    }

    h1 {
      margin: 0;
      font-size: 20px;
      letter-spacing: .2px;
    }

    .sub {
      margin-top: 6px;
      color: var(--muted);
      font-size: 13px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      padding: 16px 16px 28px;
      max-width: 1080px;
      margin: 0 auto;
    }

    .controls {
      grid-column: 1 / -1;
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 12px;
    }

    @media (max-width: 860px) {
      .controls {
        grid-template-columns: 1fr;
      }
    }

    .input,
    .select {
      width: 100%;
      border: 1px solid var(--border);
      background: rgba(18, 21, 26, .9);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 12px;
      font-size: 14px;
      outline: none;
    }

    .input:focus,
    .select:focus {
      border-color: rgba(122, 162, 255, .55);
      box-shadow: 0 0 0 3px rgba(122, 162, 255, .12);
    }

    .note {
      grid-column: 1 / -1;
      border: 1px dashed rgba(255, 255, 255, .18);
      background: rgba(15, 18, 22, .65);
      border-radius: 16px;
      padding: 12px 14px;
      color: var(--muted);
      font-size: 13px;
    }

    .note code {
      background: rgba(255, 255, 255, .06);
      padding: 2px 6px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, .10);
      color: var(--text);
    }

    .cards {
      grid-column: 1 / -1;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }

    .card {
      grid-column: span 6;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(18, 21, 26, .9), rgba(15, 18, 22, .92));
      border-radius: 18px;
      padding: 14px 14px 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, .18);
      transition: transform .12s ease, border-color .12s ease;
    }

    .card:hover {
      transform: translateY(-1px);
      border-color: rgba(122, 162, 255, .35);
    }

    @media (max-width: 860px) {
      .card {
        grid-column: span 12;
      }
    }

    .row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 10px;
    }

    .name {
      font-weight: 650;
      font-size: 15px;
      margin: 0;
    }

    .meta {
      margin-top: 6px;
      color: var(--muted);
      font-size: 12px;
    }

    .badges {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .badge {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, .14);
      background: rgba(255, 255, 255, .06);
      color: var(--text);
      user-select: none;
    }

    .badge.cat {
      border-color: rgba(122, 162, 255, .35);
      background: rgba(122, 162, 255, .10);
    }

    .badge.type {
      border-color: rgba(74, 222, 128, .35);
      background: rgba(74, 222, 128, .10);
      color: #a3e6be;
    }

    .actions {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    button {
      border: 1px solid rgba(255, 255, 255, .14);
      background: rgba(255, 255, 255, .06);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      font-size: 13px;
      cursor: pointer;
    }

    button.primary {
      border-color: rgba(122, 162, 255, .55);
      background: rgba(122, 162, 255, .14);
    }

    button:hover {
      border-color: rgba(255, 255, 255, .25);
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(18, 21, 26, .92);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 13px;
      color: var(--text);
      box-shadow: 0 10px 30px rgba(0, 0, 0, .25);
      display: none;
      max-width: min(560px, calc(100% - 24px));
    }

    footer {
      max-width: 1080px;
      margin: 0 auto;
      padding: 0 16px 22px;
      color: var(--muted);
      font-size: 12px;
    }

    footer a {
      color: var(--accent);
    }

    .lang-switch {
      font-size: 13px;
      color: var(--muted);
      display: flex;
      gap: 8px;
    }

    .lang-item {
      cursor: pointer;
      opacity: 0.6;
      transition: opacity .2s;
    }

    .lang-item:hover,
    .lang-item.active {
      opacity: 1;
      color: var(--accent);
      font-weight: bold;
    }

    .type-filters {
      grid-column: 1 / -1;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .filter-group {
      grid-column: 1 / -1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .filter-label {
      font-size: 12px;
      color: var(--muted);
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .filter-btn {
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, .06);
      color: var(--muted);
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      transition: all .2s;
    }

    .filter-btn:hover {
      background: rgba(255, 255, 255, .12);
      color: var(--text);
    }

    .filter-btn.active {
      background: rgba(74, 222, 128, .15);
      border-color: rgba(74, 222, 128, .4);
      color: #4ade80;
    }
  </style>
</head>

<body>
  <header>
    <div class="wrap">
      <div class="title">
        <h1 data-i18n="header_title">Web Benchmarks Index</h1>
        <div class="lang-switch">
          <span class="lang-item" onclick="setLanguage('en')">EN</span>
          <span class="lang-item" onclick="setLanguage('zh-CN')">ç®€</span>
          <span class="lang-item" onclick="setLanguage('zh-TW')">ç¹</span>
        </div>
      </div>
      <div style="color: var(--muted); font-size: 12px; margin-top: 4px;" data-i18n="header_hint">æ”¯æ´
        <code>?go=slug</code> / <code>#slug</code> ç›´æ¥è·³è½‰
      </div>
      <div class="sub" data-i18n="header_sub">æŠŠä½ å¸¸ç”¨çš„ WebGL / WebGPU / JS / WASM / AI benchmark é›†ä¸­åœ¨ä¸€é ï¼Œä¸¦æä¾›ã€Œå¯åˆ†äº«çš„ç›´æ¥è·³è½‰é€£çµã€ã€‚
      </div>
    </div>
  </header>

  <main class="grid">
    <section class="controls">
      <input id="q" class="input" data-i18n-placeholder="search_placeholder"
        placeholder="æœå°‹ï¼šåç¨± / ç¶²åŸŸ / tagï¼ˆä¾‹å¦‚ webgpuã€wasmã€youtubeï¼‰" autocomplete="off" />
      <div class="filter-group">
        <label class="filter-label" data-i18n="cat_label">Categories:</label>
        <div id="cat-filters" class="type-filters"></div>
      </div>
      <div class="filter-group">
        <label class="filter-label" data-i18n="type_label">Types:</label>
        <div id="type-filters" class="type-filters"></div>
      </div>
    </section>

    <section class="note" id="note">
      <div style="display:flex; flex-wrap:wrap; gap:10px; align-items:center;">
        <div data-i18n="note_title">ğŸ“Œ ç›´æ¥è·³è½‰æ–¹å¼ï¼š</div>
        <div><span data-i18n="note_eg1">ä¾‹å¦‚</span> <code>?go=browserleaks-com-webgl</code></div>
        <div><span data-i18n="note_eg2">æˆ–ç”¨</span> <code>#slug</code> <span data-i18n="note_eg1">ä¾‹å¦‚</span>
          <code>#browserleaks-com-webgl</code>
        </div>
      </div>
      <div style="margin-top:8px; color: var(--muted);" data-i18n="note_desc">
        ä½ ä¹Ÿå¯ä»¥åœ¨æ¯å¼µå¡ç‰‡æŒ‰ã€Œè¤‡è£½è·³è½‰é€£çµã€ï¼ŒæŠŠé€£çµä¸Ÿçµ¦ QA / åŒäº‹ï¼Œé»é€²å»å°±æœƒè‡ªå‹•å°åˆ°ç›®æ¨™é é¢ã€‚
      </div>
    </section>

    <section class="cards" id="cards" aria-live="polite"></section>
  </main>

  <footer>
    <div data-i18n="footer_made">Made for GitHub Pages. æª”æ¡ˆæ˜¯ç´”éœæ…‹ï¼ˆHTML/CSS/JSï¼‰ï¼Œä¸éœ€è¦å¾Œç«¯ã€‚</div>
    <div style="margin-top:6px;" data-i18n="footer_tip">æç¤ºï¼šè‹¥ä½ æœªä¾†è¦æ–°å¢/ç§»é™¤é€£çµï¼Œåªè¦æ”¹ <code>assets/data.js</code> å…§çš„æ¸…å–®å³å¯ã€‚</div>
  </footer>

  <div class="toast" id="toast"></div>

  <script src="assets/data.js"></script>
  <script>
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => document.querySelectorAll(sel);
    const cardsEl = $("#cards");
    const qEl = $("#q");
    const catFiltersEl = $("#cat-filters");
    const typeFiltersEl = $("#type-filters");
    const toastEl = $("#toast");
    const selectedTypes = new Set();
    const selectedCats = new Set();

    const TRANSLATIONS = {
      "zh-TW": {
        "page_title": "Web Benchmarks Index",
        "meta_desc": "ä¸€é æ”¶é½Š WebGL/WebGPU/JS/WASM/AI benchmark èˆ‡å·¥å…·é€£çµï¼Œæ”¯æ´ ?go=slug ç›´æ¥è·³è½‰ã€‚",
        "header_title": "Web Benchmarks Index",
        "header_hint": "æ”¯æ´ <code>?go=slug</code> / <code>#slug</code> ç›´æ¥è·³è½‰",
        "header_sub": "æŠŠä½ å¸¸ç”¨çš„ WebGL / WebGPU / JS / WASM / AI benchmark é›†ä¸­åœ¨ä¸€é ï¼Œä¸¦æä¾›ã€Œå¯åˆ†äº«çš„ç›´æ¥è·³è½‰é€£çµã€ã€‚",
        "search_placeholder": "æœå°‹ï¼šåç¨± / ç¶²åŸŸ / tagï¼ˆä¾‹å¦‚ webgpuã€wasmã€youtubeï¼‰",
        "cat_all": "å…¨éƒ¨åˆ†é¡",
        "note_title": "ğŸ“Œ ç›´æ¥è·³è½‰æ–¹å¼ï¼š",
        "note_eg1": "ä¾‹å¦‚",
        "note_eg2": "æˆ–ç”¨",
        "note_desc": "ä½ ä¹Ÿå¯ä»¥åœ¨æ¯å¼µå¡ç‰‡æŒ‰ã€Œè¤‡è£½è·³è½‰é€£çµã€ï¼ŒæŠŠé€£çµä¸Ÿçµ¦ QA / åŒäº‹ï¼Œé»é€²å»å°±æœƒè‡ªå‹•å°åˆ°ç›®æ¨™é é¢ã€‚",
        "footer_made": "Made for GitHub Pages. æª”æ¡ˆæ˜¯ç´”éœæ…‹ï¼ˆHTML/CSS/JSï¼‰ï¼Œä¸éœ€è¦å¾Œç«¯ã€‚",
        "footer_tip": "æç¤ºï¼šè‹¥ä½ æœªä¾†è¦æ–°å¢/ç§»é™¤é€£çµï¼Œåªè¦æ”¹ <code>assets/data.js</code> å…§çš„æ¸…å–®å³å¯ã€‚",
        "open": "é–‹å•Ÿ",
        "open_self": "åŸåœ°è·³è½‰",
        "copy_link": "è¤‡è£½è·³è½‰é€£çµ",
        "copy_url": "è¤‡è£½åŸå§‹ URL",
        "toast_copied_link": "å·²è¤‡è£½è·³è½‰é€£çµ âœ…",
        "toast_copy_fail": "è¤‡è£½å¤±æ•—",
        "toast_copied_url": "å·²è¤‡è£½ URL âœ…",
        "toast_no_slug": "æ‰¾ä¸åˆ° slugï¼š",
        "no_matches": "æ‰¾ä¸åˆ°ç¬¦åˆçš„é …ç›®ã€‚"
      },
      "zh-CN": {
        "page_title": "Web Benchmarks Index",
        "meta_desc": "ä¸€é¡µæ”¶é½ WebGL/WebGPU/JS/WASM/AI benchmark ä¸å·¥å…·é“¾æ¥ï¼Œæ”¯æ´ ?go=slug ç›´æ¥è·³è½¬ã€‚",
        "header_title": "Web Benchmarks Index",
        "header_hint": "æ”¯æŒ <code>?go=slug</code> / <code>#slug</code> ç›´æ¥è·³è½¬",
        "header_sub": "æŠŠä½ å¸¸ç”¨çš„ WebGL / WebGPU / JS / WASM / AI benchmark é›†ä¸­åœ¨ä¸€é¡µï¼Œå¹¶æä¾›â€œå¯åˆ†äº«çš„ç›´æ¥è·³è½¬é“¾æ¥â€ã€‚",
        "search_placeholder": "æœç´¢ï¼šåç§° / åŸŸå / tagï¼ˆä¾‹å¦‚ webgpuã€wasmã€youtubeï¼‰",
        "cat_all": "å…¨éƒ¨åˆ†ç±»",
        "note_title": "ğŸ“Œ ç›´æ¥è·³è½¬æ–¹å¼ï¼š",
        "note_eg1": "ä¾‹å¦‚",
        "note_eg2": "æˆ–ç”¨",
        "note_desc": "ä½ ä¹Ÿå¯ä»¥åœ¨æ¯å¼ å¡ç‰‡æŒ‰â€œå¤åˆ¶è·³è½¬é“¾æ¥â€ï¼ŒæŠŠé“¾æ¥å‘ç»™ QA / åŒäº‹ï¼Œç‚¹è¿›å»å°±ä¼šè‡ªåŠ¨å¯¼å‘ç›®æ ‡é¡µé¢ã€‚",
        "footer_made": "Made for GitHub Pages. æ–‡ä»¶æ˜¯çº¯é™æ€ï¼ˆHTML/CSS/JSï¼‰ï¼Œä¸éœ€è¦åç«¯ã€‚",
        "footer_tip": "æç¤ºï¼šè‹¥ä½ æœªæ¥è¦æ–°å¢/ç§»é™¤é“¾æ¥ï¼Œåªè¦æ”¹ <code>assets/data.js</code> å†…çš„æ¸…å•å³å¯ã€‚",
        "open": "å¼€å¯",
        "open_self": "åŸåœ°è·³è½¬",
        "copy_link": "å¤åˆ¶è·³è½¬é“¾æ¥",
        "copy_url": "å¤åˆ¶åŸå§‹ URL",
        "toast_copied_link": "å·²å¤åˆ¶è·³è½¬é“¾æ¥ âœ…",
        "toast_copy_fail": "å¤åˆ¶å¤±è´¥",
        "toast_copied_url": "å·²å¤åˆ¶ URL âœ…",
        "toast_no_slug": "æ‰¾ä¸åˆ° slugï¼š",
        "no_matches": "æ‰¾ä¸åˆ°ç¬¦åˆçš„é¡¹ç›®ã€‚"
      },
      "en": {
        "page_title": "Web Benchmarks Index",
        "meta_desc": "A collection of WebGL/WebGPU/JS/WASM/AI benchmarks and tools. Supports ?go=slug redirect.",
        "header_title": "Web Benchmarks Index",
        "header_hint": "Supports <code>?go=slug</code> / <code>#slug</code> for direct links",
        "header_sub": "Collects your favorite WebGL / WebGPU / JS / WASM / AI benchmarks in one page, providing 'shareable direct links'.",
        "search_placeholder": "Search: name / domain / tag (e.g., webgpu, wasm, youtube)",
        "cat_all": "All Categories",
        "note_title": "ğŸ“Œ Direct Link Usage:",
        "note_eg1": "e.g.",
        "note_eg2": "or",
        "note_desc": "You can also click 'Copy Link' on each card to share a direct link with QA/colleagues.",
        "footer_made": "Made for GitHub Pages. Pure static files (HTML/CSS/JS), no backend required.",
        "footer_tip": "Tip: To add/remove links, just edit the list in <code>assets/data.js</code>.",
        "open": "Open",
        "open_self": "Open Here",
        "copy_link": "Copy Link",
        "copy_url": "Copy URL",
        "toast_copied_link": "Link Copied âœ…",
        "toast_copy_fail": "Copy Failed",
        "toast_copied_url": "URL Copied âœ…",
        "toast_no_slug": "Slug not found: ",
        "no_matches": "No matching items found."
      }
    };

    let currentLang = "zh-TW";

    function t(key) {
      return TRANSLATIONS[currentLang][key] || key;
    }

    function setLanguage(lang) {
      if (!TRANSLATIONS[lang]) return;
      currentLang = lang;
      localStorage.setItem("wbi_lang", lang);
      document.documentElement.lang = lang;

      // Update data-i18n
      $$("[data-i18n]").forEach(el => {
        const key = el.dataset.i18n;
        el.innerHTML = t(key);
      });

      // Update placeholders
      $$("[data-i18n-placeholder]").forEach(el => {
        const key = el.dataset.i18nPlaceholder;
        el.placeholder = t(key);
      });

      // Update meta tag
      const descriptionMeta = $("meta[name='description']");
      if (descriptionMeta) {
        descriptionMeta.content = t('meta_desc');
      }

      // Update active state in switcher
      $$(".lang-item").forEach(el => {
        el.classList.toggle("active", el.attributes.onclick.value.includes(`'${lang}'`));
      });

      // Re-render cards to update button texts
      refresh();
    }

    function initLanguage() {
      const saved = localStorage.getItem("wbi_lang");
      if (saved && TRANSLATIONS[saved]) {
        setLanguage(saved);
      } else {
        const browser = navigator.language.startsWith("zh") ? (navigator.language === "zh-TW" || navigator.language === "zh-HK" ? "zh-TW" : "zh-CN") : "en";
        setLanguage(TRANSLATIONS[browser] ? browser : "zh-TW");
      }
    }

    function showToast(msg) {
      toastEl.textContent = msg;
      toastEl.style.display = "block";
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toastEl.style.display = "none", 1400);
    }

    function originPath() {
      // Keep it robust for GitHub Pages subpaths
      return window.location.origin + window.location.pathname;
    }

    function buildDirectLink(slug) {
      const base = originPath();
      return base + "?go=" + encodeURIComponent(slug);
    }

    function hostOf(url) {
      try { return new URL(url).host; } catch (_) { return ""; }
    }

    function normalize(s) {
      return (s ?? "").toString().trim().toLowerCase();
    }

    function matches(item, q) {
      // Category Filter Logic (OR)
      if (selectedCats.size > 0) {
        if (!selectedCats.has(item.category)) return false;
      }

      // Type Filter Logic (OR)
      if (selectedTypes.size > 0) {
        const itemTypes = item.types || [];
        const hasMatch = itemTypes.some(t => selectedTypes.has(t));
        if (!hasMatch) return false;
      }

      if (!q) return true;
      const hay = [
        item.title,
        item.url,
        item.category,
        ...(item.tags || []),
        ...(item.types || []),
        item.slug
      ].map(normalize).join(" ");
      return hay.includes(q);
    }

    function render(list) {
      if (!list.length) {
        cardsEl.innerHTML = `<div style='grid-column:1/-1; color: var(--muted); padding: 10px 2px;'>${t('no_matches')}</div>`;
        return;
      }
      cardsEl.innerHTML = list.map((it) => {
        const host = hostOf(it.url);
        const tags = (it.tags || []).map(t => `<span class="badge">${t}</span>`).join("");
        const types = (it.types || []).map(t => `<span class="badge type">${t}</span>`).join(" ");
        return `
          <article class="card" data-slug="${it.slug}">
            <div class="row">
              <div>
                <h3 class="name">${it.title}</h3>
                <div class="meta">${host} Â· <span class="badge cat">${it.category}</span> Â· ${types}</div>
              </div>
            </div>
            <div class="badges">${tags}</div>
            <div class="actions">
              <button class="primary" data-act="open" data-url="${it.url}">${t('open')}</button>
              <button data-act="open-self" data-url="${it.url}">${t('open_self')}</button>
              <button data-act="copy" data-slug="${it.slug}">${t('copy_link')}</button>
              <button data-act="copy-url" data-url="${it.url}">${t('copy_url')}</button>
            </div>
          </article>
        `;
      }).join("");
    }

    function refresh() {
      const q = normalize(qEl.value);
      const filtered = BENCHMARKS.filter(it => matches(it, q));
      render(filtered);
    }

    function setupFilters() {
      // Setup Category Buttons
      const cats = Array.from(new Set(BENCHMARKS.map(b => b.category))).sort();
      cats.forEach(c => {
        const btn = document.createElement("button");
        btn.className = "filter-btn";
        btn.textContent = c;
        btn.onclick = () => {
          if (selectedCats.has(c)) {
            selectedCats.delete(c);
            btn.classList.remove("active");
          } else {
            selectedCats.add(c);
            btn.classList.add("active");
          }
          refresh();
        };
        catFiltersEl.appendChild(btn);
      });

      // Setup Type Buttons
      const allTypes = new Set();
      BENCHMARKS.forEach(b => (b.types || []).forEach(t => allTypes.add(t)));
      const sortedTypes = Array.from(allTypes).sort();

      sortedTypes.forEach(type => {
        const btn = document.createElement("button");
        btn.className = "filter-btn";
        btn.textContent = type;
        btn.onclick = () => {
          if (selectedTypes.has(type)) {
            selectedTypes.delete(type);
            btn.classList.remove("active");
          } else {
            selectedTypes.add(type);
            btn.classList.add("active");
          }
          refresh();
        };
        typeFiltersEl.appendChild(btn);
      });
    }

    async function copyText(t) {
      try {
        await navigator.clipboard.writeText(t);
        return true;
      } catch (e) {
        // fallback
        const ta = document.createElement("textarea");
        ta.value = t;
        ta.style.position = "fixed";
        ta.style.left = "-9999px";
        document.body.appendChild(ta);
        ta.select();
        const ok = document.execCommand("copy");
        document.body.removeChild(ta);
        return ok;
      }
    }

    function goToSlug(slug) {
      const it = BENCHMARKS.find(b => b.slug === slug);
      if (!it) return false;
      window.location.replace(it.url);
      return true;
    }

    function tryAutoRedirect() {
      const sp = new URLSearchParams(window.location.search);
      const slug = sp.get("go") || sp.get("slug") || sp.get("id");
      if (slug) {
        const ok = goToSlug(slug);
        if (!ok) {
          showToast(t('toast_no_slug') + slug);
        }
      } else if (window.location.hash && window.location.hash.length > 1) {
        const h = decodeURIComponent(window.location.hash.slice(1));
        const ok = goToSlug(h);
        if (!ok) {
          showToast(t('toast_no_slug') + h);
        }
      }
    }

    // Init
    initLanguage();
    setupFilters();
    render(BENCHMARKS);

    // Events
    qEl.addEventListener("input", refresh);

    cardsEl.addEventListener("click", async (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;
      const act = btn.dataset.act;
      if (act === "open") {
        const url = btn.dataset.url;
        window.open(url, "_blank", "noopener,noreferrer");
      } else if (act === "open-self") {
        const url = btn.dataset.url;
        window.location.href = url;
      } else if (act === "copy") {
        const slug = btn.dataset.slug;
        const link = buildDirectLink(slug);
        const ok = await copyText(link);
        showToast(ok ? t('toast_copied_link') : t('toast_copy_fail'));
      } else if (act === "copy-url") {
        const url = btn.dataset.url;
        const ok = await copyText(url);
        showToast(ok ? t('toast_copied_url') : t('toast_copy_fail'));
      }
    });

    // Redirect last, so the page still works even if blocked by browser policies
    tryAutoRedirect();
  </script>
</body>

</html>